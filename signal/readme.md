Требуется подготовить безопасную реализацию серверного процесса, который совмещает обработку соединений TCP/IP с обработкой сигналов (можно выбрать, скажем, сигнал SIGHUP). Приложение должно:

Принимать соединения на некоторый порт, сообщать о новых соединениях на терминал, n соединений оставлять принятым(можно самому задать сколько соединений оставлять n = MAX_CLIENTS ) , остальные закрывать сразу после подключения.
При появлении любых данных в соединении выводить сообщение на терминал .
При получении сигнала выводить сообщение на терминал.
Фактически, работа сводится к правильному вызову функции pselect(), но все действия должны быть выполнены в предельно безопасном виде, исключающем любые race condition.


для отправки сообщений можно использовать например nc: 
nc localhost 1234
для завершения слиенту можно отправить q или нажать ctrl+c

чтобы остановить сервер можно отправить SIGHUP: kill -HUP <PID> (<PID> выводится при запуске сервера )
